

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/ghost_icon.png">
  <link rel="icon" href="/img/ghost_icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="Newbie">
  <meta name="author" content="森同学">
  <meta name="keywords" content="">
  <meta name="description" content="Newbie">
<meta property="og:type" content="article">
<meta property="og:title" content="039 Log of migrating to Linux">
<meta property="og:url" content="https://kassadin.moe/2020/03/15/039-log-of-migrating-to-linux/index.html">
<meta property="og:site_name" content="Blog - Kassadin">
<meta property="og:description" content="Newbie">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-03-15T04:31:13.000Z">
<meta property="article:modified_time" content="2023-05-26T17:15:11.703Z">
<meta property="article:author" content="森同学">
<meta property="article:tag" content="notebook">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary_large_image">
  
  <title>039 Log of migrating to Linux - Blog - Kassadin</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/hybrid.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"kassadin.moe","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":200}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":1},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Blog - Kassadin" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Blog - Kassadin</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/atom.xml">
                <i class="iconfont icon-rss"></i>
                RSS
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="039 Log of migrating to Linux">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-03-15 12:31" pubdate>
        2020-03-15
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      13k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      40 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">039 Log of migrating to Linux</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2023-05-27
                
              </p>
            
            <div class="markdown-body">
              <p>Newbie</p>
<span id="more"></span>

<hr>
<h4 id="Boot-Failed-Failed-to-start-Remount-Root-and-Kernel-File-Systems"><a href="#Boot-Failed-Failed-to-start-Remount-Root-and-Kernel-File-Systems" class="headerlink" title="Boot Failed: Failed to start Remount Root and Kernel File Systems"></a>Boot Failed: Failed to start Remount Root and Kernel File Systems</h4><figure class="highlight awk"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs awk"><span class="hljs-comment"># ls all drivers info</span><br>$ blkid<br><br><span class="hljs-comment"># check `fstab` file, find a wrong value</span><br>$ cat <span class="hljs-regexp">/etc/</span>fstab<br><br><span class="hljs-comment"># I don&#x27;t know how to copy and paste in terminal...</span><br><span class="hljs-comment"># So, edit driver&#x27;s id to `/dev/sda1`</span><br>$ vi <span class="hljs-regexp">/etc/</span>fstab<br><br><span class="hljs-comment"># reboot machine</span><br><span class="hljs-comment"># edit `/etc/fstab` &lt;file system&gt; value to UUID of each driver</span><br></code></pre></div></td></tr></table></figure>
<p>ref:<br><a target="_blank" rel="noopener" href="https://askubuntu.com/a/918302" title="link">Boot Failed: Failed to start Remount Root and Kernel File Systems</a></p>
<hr>
<h4 id="Set-custom-resolution"><a href="#Set-custom-resolution" class="headerlink" title="Set custom resolution"></a>Set custom resolution</h4><blockquote>
<p>System Setting -&gt;&gt; Hardware Configuraion -&gt;&gt; Display controller -&gt;&gt; video-modesetting &amp; video-vesa<br>After these 2 driver installed, my monitor display in a wrong resolution or just go black after reboot</p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs yaml"><span class="hljs-comment"># list ports of your video card</span><br><span class="hljs-string">$</span> <span class="hljs-string">xrandr</span> <span class="hljs-string">--props</span><br><br><span class="hljs-comment"># generate a &quot;modeline&quot; with cvt</span><br><span class="hljs-comment"># eg. 4k monitor in 60FPS</span><br><span class="hljs-string">$</span> <span class="hljs-string">cvt</span> <span class="hljs-number">3840 </span><span class="hljs-number">2160 </span><span class="hljs-number">60</span><br><span class="hljs-comment"># 3840x2160 59.98 Hz (CVT 8.29M9) hsync: 134.18 kHz; pclk: 712.75 MHz</span><br><span class="hljs-string">Modeline</span> <span class="hljs-string">&quot;3840x2160_60.00&quot;</span>  <span class="hljs-number">712.75</span>  <span class="hljs-number">3840 </span><span class="hljs-number">4160 </span><span class="hljs-number">4576 </span><span class="hljs-number">5312  </span><span class="hljs-number">2160 </span><span class="hljs-number">2163 </span><span class="hljs-number">2168 </span><span class="hljs-number">2237</span> <span class="hljs-string">-hsync</span> <span class="hljs-string">+vsync</span><br><br><span class="hljs-comment"># edit Xsetup file</span><br><span class="hljs-string">$</span> <span class="hljs-string">sudo</span> <span class="hljs-string">vim</span> <span class="hljs-string">/usr/share/sddm/scripts/Xsetup</span><br><br><span class="hljs-comment"># add following</span><br><span class="hljs-string">xrandr</span> <span class="hljs-string">--newmode</span> <span class="hljs-string">&quot;3840x2160_60.00&quot;</span>  <span class="hljs-number">712.75</span>  <span class="hljs-number">3840 </span><span class="hljs-number">4160 </span><span class="hljs-number">4576 </span><span class="hljs-number">5312  </span><span class="hljs-number">2160 </span><span class="hljs-number">2163 </span><span class="hljs-number">2168 </span><span class="hljs-number">2237</span> <span class="hljs-string">-hsync</span> <span class="hljs-string">+vsync</span><br><span class="hljs-string">xrandr</span> <span class="hljs-string">--addmode</span> <span class="hljs-string">DisplayPort-1</span> <span class="hljs-string">3840x2160_60</span><br><span class="hljs-string">xrandr</span> <span class="hljs-string">--output</span> <span class="hljs-string">DisplayPort-1</span> <span class="hljs-string">--mode</span> <span class="hljs-string">3840x2160_60</span><br></code></pre></div></td></tr></table></figure>

<p>ref:<br><a target="_blank" rel="noopener" href="https://forum.manjaro.org/t/vega-64-installation-problems/75272/47" title="link">Vega 64 installation problems</a><br><a target="_blank" rel="noopener" href="https://ubuntuforums.org/showthread.php?t=2365956" title="link">amdgpu displayport</a><br><a target="_blank" rel="noopener" href="https://askubuntu.com/questions/377937/how-to-set-a-custom-resolution" title="link">xrandr - How to set a custom resolution?</a></p>
<hr>
<h4 id="Restart-X-windows-service"><a href="#Restart-X-windows-service" class="headerlink" title="Restart X-windows service"></a>Restart X-windows service</h4><p><code>Ctrl Alt Backspace</code><br>But usually doesn’t work</p>
<p><code>Ctrl Alt F6</code><br>Switch to tty6(any other tty is ok), login and <code>systemctl restart display-manager</code></p>
<p>ref:<br><a target="_blank" rel="noopener" href="https://askubuntu.com/questions/1220/how-to-restart-x-window-server-from-command-line" title="link">How to restart X Window Server from command line?</a></p>
<hr>
<h4 id="Set-Wacom-tablet-scrolling-pages-with-middle-mouse-button"><a href="#Set-Wacom-tablet-scrolling-pages-with-middle-mouse-button" class="headerlink" title="Set Wacom tablet, scrolling pages with middle mouse button"></a>Set Wacom tablet, scrolling pages with middle mouse button</h4><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># list devices</span><br>$ xsetwacom --<span class="hljs-built_in">list</span> devices<br>Wacom Intuos BT M Pen stylus            <span class="hljs-built_in">id</span>: <span class="hljs-number">10</span>  <span class="hljs-built_in">type</span>: STYLUS    <br>Wacom Intuos BT M Pad pad               <span class="hljs-built_in">id</span>: <span class="hljs-number">11</span>  <span class="hljs-built_in">type</span>: PAD       <br>Wacom Intuos BT M Pen eraser            <span class="hljs-built_in">id</span>: <span class="hljs-number">13</span>  <span class="hljs-built_in">type</span>: ERASER    <br>Wacom Intuos BT M Pen cursor            <span class="hljs-built_in">id</span>: <span class="hljs-number">14</span>  <span class="hljs-built_in">type</span>: CURSOR<br><br><span class="hljs-comment"># change feature of button 2 to pan</span><br>$ xsetwacom --<span class="hljs-built_in">set</span> <span class="hljs-string">&quot;Wacom Intuos BT M Pen stylus&quot;</span> Button <span class="hljs-number">2</span> <span class="hljs-string">&quot;pan&quot;</span><br><br><span class="hljs-comment"># increase the sensitivity of panning action</span><br>$ xsetwacom --<span class="hljs-built_in">set</span> <span class="hljs-string">&quot;Wacom Intuos BT M Pen stylus&quot;</span> <span class="hljs-string">&quot;PanScrollThreshold&quot;</span> <span class="hljs-number">40</span><br></code></pre></div></td></tr></table></figure>

<p>But I need to set these parameters every login, therefore add following lines to <code>.bashrc</code> </p>
<figure class="highlight routeros"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs routeros"><span class="hljs-comment"># Wacom tablet, pan with middle mouse button</span><br>xsetwacom --<span class="hljs-builtin-name">set</span> <span class="hljs-string">&quot;Wacom Intuos BT M Pen stylus&quot;</span> Button 2 <span class="hljs-string">&quot;pan&quot;</span><br>xsetwacom --<span class="hljs-builtin-name">set</span> <span class="hljs-string">&quot;Wacom Intuos BT M Pen stylus&quot;</span> <span class="hljs-string">&quot;PanScrollThreshold&quot;</span> 40<br></code></pre></div></td></tr></table></figure>

<p>ref:<br><a target="_blank" rel="noopener" href="https://askubuntu.com/a/1184197" title="link">Wacom tablet middle mouse button scrolling</a><br><code>man xsetwacom</code> in terminal</p>
<blockquote>
</blockquote>
<p>2020/07/28 update</p>
<figure class="highlight arduino"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs arduino"># Wcaom tablet, press&amp;click to work<br>xsetwacom --set <span class="hljs-string">&quot;Wacom Intuos BT M Pen stylus&quot;</span> TabletPCButton <span class="hljs-string">&quot;on&quot;</span><br></code></pre></div></td></tr></table></figure>

<hr>
<h4 id="Access-to-SMB-share-folder"><a href="#Access-to-SMB-share-folder" class="headerlink" title="Access to SMB share folder"></a>Access to SMB share folder</h4><p>eg. input <code>smb://win/e</code> to address bar of folder manager</p>
<blockquote>
<p><code>win/e</code> is the share link of SMB folder</p>
</blockquote>
<hr>
<h4 id="cd-to-custom-directory"><a href="#cd-to-custom-directory" class="headerlink" title="cd to custom directory"></a>cd to custom directory</h4><p>ref:<br><a target="_blank" rel="noopener" href="https://linux.101hacks.com/cd-command/cdpath/" title="link">Use CDPATH to define the base directory for cd command</a></p>
<blockquote>
<p>2020/07/05 update<br>Chris Titus Tech provide a solution that set alias for custom directory in his video <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=ypWaj4Qxj1k&t=722s">16 Linux Tips in 10 Minutes</a><br>eg. alias ctt=’cd /media/backups/SynologyDrive/ctt’<br>Work on VPS.<br>But on my desktop, it’ll always crash bash shell (misleading me for a long time…)</p>
</blockquote>
<hr>
<h4 id="Network-problem"><a href="#Network-problem" class="headerlink" title="Network problem"></a>Network problem</h4><p>System Setting -&gt;&gt; Hardware Configuraion -&gt;&gt; Network controller<br>this driver doesn’t work well on my computer<br>No connetion with the wired cable, connection only succeed after reboot.</p>
<p><code>cat /etc/resolv.conf</code> no nameserver<br><code>ip route</code> output nothing<br><code>ip addr</code> output a lot, but I can’t find bugs</p>
<p>uninstall this driver will solve the problem<br>(maybe it’s not the correct driver</p>
<hr>
<h4 id="Return-to-last-edit-position-in-Vim"><a href="#Return-to-last-edit-position-in-Vim" class="headerlink" title="Return to last edit position in Vim"></a>Return to last edit position in Vim</h4><p>Solution from <code>/usr/share/vim/vim82/defaults.vim</code></p>
<figure class="highlight vim"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs vim"><span class="hljs-comment">&quot; When editing a file, always jump to the last known cursor position.</span><br><span class="hljs-comment">&quot; Don&#x27;t do it when the position is invalid, when inside an event handler</span><br><span class="hljs-comment">&quot; (happens when dropping a file on gvim) and for a commit message (it&#x27;s</span><br><span class="hljs-comment">&quot; likely a different one than last time).</span><br><span class="hljs-keyword">autocmd</span> BufReadPost *<br>  \ <span class="hljs-keyword">if</span> <span class="hljs-built_in">line</span>(<span class="hljs-string">&quot;&#x27;\&quot;&quot;</span>) &gt;= <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-built_in">line</span>(<span class="hljs-string">&quot;&#x27;\&quot;&quot;</span>) &lt;= <span class="hljs-built_in">line</span>(<span class="hljs-string">&quot;$&quot;</span>) &amp;&amp; &amp;ft !~# <span class="hljs-string">&#x27;commit&#x27;</span><br>  \ |   <span class="hljs-keyword">exe</span> <span class="hljs-string">&quot;normal! g`\&quot;&quot;</span><br>  \ | <span class="hljs-keyword">endif</span><br></code></pre></div></td></tr></table></figure>

<hr>
<h4 id="Ubuntu-Boot-Partition-Full"><a href="#Ubuntu-Boot-Partition-Full" class="headerlink" title="Ubuntu Boot Partition Full"></a>Ubuntu Boot Partition Full</h4><figure class="highlight elixir"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs elixir"><span class="hljs-comment"># 1. check drive useage</span><br><span class="hljs-variable">$ </span>df -h<br><br><span class="hljs-comment"># 2. check current kernel version </span><br><span class="hljs-variable">$ </span>uname -r<br><br><span class="hljs-comment"># 3. list all the installed kernel packages</span><br><span class="hljs-variable">$ </span>dpkg -l | grep linux-image<br><br><span class="hljs-comment"># 4. remove useless kernel packages</span><br><span class="hljs-variable">$ </span>apt remove --purge linux-image-*.**.*-**-generic<br><br><span class="hljs-comment"># 5. clean up the dependencies of removed kernel packages</span><br><span class="hljs-variable">$ </span>apt autoremove --purge<br></code></pre></div></td></tr></table></figure>

<p>Ref: <a target="_blank" rel="noopener" href="https://linuxhint.com/ubuntu_boot_partition_full/">Ubuntu Boot Partition Full</a></p>
<hr>
<p>2020/11/28 update</p>
<h4 id="Telegram-Desktop-can’t-input-Chinese-characters"><a href="#Telegram-Desktop-can’t-input-Chinese-characters" class="headerlink" title="Telegram Desktop can’t input Chinese characters"></a>Telegram Desktop can’t input Chinese characters</h4><ul>
<li><p>Solution <a target="_blank" rel="noopener" href="https://medium.com/@kagami91582/note-linux%E4%B8%8B%E7%84%A1%E6%B3%95%E5%9C%A8telegram%E8%BC%B8%E5%85%A5%E4%B8%AD%E6%96%87-%E8%A7%A3%E6%B3%95-830aa9412c19">[Note] Linux下無法在telegram輸入中文(解法)</a><br>add <code>env QT_IM_MODULE=***</code> to <code>telegramdesktop.desktop</code> file<br><code>***</code> is the input method<br>I use ibus, so add <code>env QT_IM_MODULE=ibus</code> after <code>Exex=</code></p>
</li>
<li><p>edited .desktop file</p>
<figure class="highlight ini"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs ini"><span class="hljs-section">[Desktop Entry]</span><br><span class="hljs-attr">Version</span>=<span class="hljs-number">1.0</span><br><span class="hljs-attr">Name</span>=Telegram Desktop<br><span class="hljs-attr">Comment</span>=<span class="hljs-literal">Off</span>icial desktop version of Telegram messaging app<br><span class="hljs-attr">TryExec</span>=telegram-desktop<br><span class="hljs-attr">Exec</span>=env QT_IM_MODULE=ibus telegram-desktop -- %u<br><span class="hljs-attr">Icon</span>=telegram<br><span class="hljs-attr">Terminal</span>=<span class="hljs-literal">false</span><br><span class="hljs-attr">StartupWMClass</span>=TelegramDesktop<br><span class="hljs-attr">Type</span>=Application<br><span class="hljs-attr">Categories</span>=Chat<span class="hljs-comment">;Network;InstantMessaging;Qt;</span><br><span class="hljs-attr">MimeType</span>=x-scheme-handler/tg<span class="hljs-comment">;</span><br><span class="hljs-attr">Keywords</span>=tg<span class="hljs-comment">;chat;im;messaging;messenger;sms;tdesktop;</span><br><span class="hljs-attr">X-GNOME-UsesNotifications</span>=<span class="hljs-literal">true</span><br></code></pre></div></td></tr></table></figure>
<p>(only <code>QT_IM_MODULE=ibus</code> is also ok)</p>
</li>
<li><p>but other applications can’t input Chinese too</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://medium.com/hong-kong-linux-user-group/%E4%BF%AE%E6%AD%A3-telegram-desktop-%E5%8F%8A%E5%85%B6%E4%BB%96-qt-%E8%BB%9F%E4%BB%B6%E5%9C%A8-gnome-wayland-%E4%B8%8B%E7%9A%84-ibus-%E4%B8%AD%E6%96%87%E8%BC%B8%E5%85%A5%E5%95%8F%E9%A1%8C-797abc906c3d">在 Linux 上用 Telegram Desktop 打不到中文？</a><br>思前想後，決定去報告問題。然後在 ilya-fedin 大大的協助下，發現較新版本的 iBus 會參考 $WAYLAND_DISPLAY 參數決定 socket 的名稱，而 Qt 暫時還未適應這個轉變，而引用了錯誤的 iBus socket，導致無法收到任何 iBus 的輸入，而只能顯示英文字母。<br>同樣的問題應該適用於 .deb / .rpm / tarball 安裝的任何 Qt 軟件。</p>
</blockquote>
</li>
</ul>
<p>Soution from above article:</p>
<figure class="highlight awk"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs awk">mkdir -p <span class="hljs-variable">$HOME</span><span class="hljs-regexp">/.config/</span>environment.d<br>echo <span class="hljs-string">&quot;IBUS_USE_PORTAL=1&quot;</span> &gt; <span class="hljs-variable">$HOME</span><span class="hljs-regexp">/.config/</span>environment.d/<span class="hljs-number">99</span>-ibus-use-portal.conf<br></code></pre></div></td></tr></table></figure>
<p>and reboot</p>
<blockquote>
<p>But above solution don’t work on my manjaro kde 20.1.2</p>
</blockquote>
<ul>
<li>Finally<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;IBUS_USE_PORTAL=1&quot;</span> &gt; <span class="hljs-variable">$HOME</span>/.pam_environment<br></code></pre></div></td></tr></table></figure>
and log out, log in again, work on every application (except telegram…</li>
</ul>
<p>Ref: <a target="_blank" rel="noopener" href="https://github.com/telegramdesktop/tdesktop/issues/2013">Telegram Desktop does not recognize IBus switch between Japanese and English input</a></p>
<hr>
<h4 id="Firefox-hardware-acceleration"><a href="#Firefox-hardware-acceleration" class="headerlink" title="Firefox hardware acceleration"></a>Firefox hardware acceleration</h4><p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Firefox#Hardware_video_acceleration">ArchWiki - Firefox</a><br><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Hardware_video_acceleration">ArchWiki - Hardware video acceleration</a><br><a target="_blank" rel="noopener" href="https://mpv.io/manual/stable/#options-hwdec">mpv.io - options hwdec</a><br><a href="">mozilla wiki - Blocklisting/Blocked Graphics Drivers</a><a target="_blank" rel="noopener" href="https://wiki.mozilla.org/Blocklisting/Blocked_Graphics_Drivers#On_X11">https://wiki.mozilla.org/Blocklisting/Blocked_Graphics_Drivers#On_X11</a></p>
<p>input <code>about:support</code> at address bar of firefox to check info<br>input <code>about:config</code> at address bar of firefox to edit advance options</p>
<hr>
<h5 id="AMD-gpu-fan-control"><a href="#AMD-gpu-fan-control" class="headerlink" title="AMD gpu fan control"></a>AMD gpu fan control</h5><p><code>pacman -S fancontrol-gui</code></p>
<hr>
<h5 id="Pacman-Mirrors"><a href="#Pacman-Mirrors" class="headerlink" title="Pacman Mirrors"></a>Pacman Mirrors</h5><p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Mirrors">ArchWiki - Mirrors</a><br><a target="_blank" rel="noopener" href="https://www.archlinux.org/mirrors/status/">ArchWiki - Mirrors Status</a><br><a target="_blank" rel="noopener" href="https://www.archlinux.org/mirrorlist/">ArchWiki - Pacman Mirrorlist Generator</a></p>
<blockquote>
<p>After creating/editing /etc/pacman.d/mirrorlist, issue the following command:<br><code>pacman -Syyu</code></p>
</blockquote>
<hr>
<p><code>2020/12/16 update</code></p>
<h4 id="Search-function"><a href="#Search-function" class="headerlink" title="Search function"></a>Search function</h4><p>The search function of <code>Dlophin</code> which is the default file manager in Manjaro KDE is tooooooooooo weak to use.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/cboxdoerfer/fsearch">FSearch</a> and <a target="_blank" rel="noopener" href="https://github.com/DoTheEvo/ANGRYsearch">ANGRYsearch</a> are good search tools with GUI, <a target="_blank" rel="noopener" href="https://github.com/junegunn/fzf">fzf</a> is a choice in command line.</p>
<p>Ref: <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/4a62c38bec7e">Linux下快速搜索文件（类似Everything）</a></p>
<hr>
<p><code>2021/02/24 update</code></p>
<h4 id="Reinstall-system-aaaaaagain"><a href="#Reinstall-system-aaaaaagain" class="headerlink" title="Reinstall system aaaaaagain"></a>Reinstall system aaaaaagain</h4><p>Breaking my Linux system one/two/three/…etc time(s)<br>:(</p>
<figure class="highlight pgsql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs pgsql"># <span class="hljs-number">1.</span> :(<br>[FAILED] Failed <span class="hljs-keyword">to</span> <span class="hljs-keyword">start</span> <span class="hljs-keyword">Load</span> Kernel Modules.<br>[FAILED] Failed <span class="hljs-keyword">to</span> mount /boot/efi.<br>[DEPEND] Dependency failed <span class="hljs-keyword">for</span> <span class="hljs-keyword">Local</span> File Systems.<br><br># <span class="hljs-number">2.</span> &quot;journalctl -xb&quot; <br>mount: /boot/efi: <span class="hljs-type">unknown</span> filesystem <span class="hljs-keyword">type</span> <span class="hljs-string">&#x27;vfat&#x27;</span>.<br>boot-efi.mount: Mount process exited, code=exited, status=<span class="hljs-number">32</span>/n/a<br>boot-efi.mount: Fialed <span class="hljs-keyword">with</span> result <span class="hljs-string">&#x27;exit-code&#x27;</span>.<br>Failed <span class="hljs-keyword">to</span> mount /boot/efi.<br>Dependency failed <span class="hljs-keyword">for</span> <span class="hljs-keyword">Local</span> File Systems.<br><br>Failed <span class="hljs-keyword">to</span> look up module <span class="hljs-keyword">alias</span> <span class="hljs-string">&#x27;crypto_user&#x27;</span>: <span class="hljs-keyword">Function</span> <span class="hljs-keyword">not</span> implemented<br>Failed <span class="hljs-keyword">to</span> look up module <span class="hljs-keyword">alias</span> <span class="hljs-string">&#x27;sg&#x27;</span>: <span class="hljs-keyword">Function</span> <span class="hljs-keyword">not</span> implemented<br>Failed <span class="hljs-keyword">to</span> look up module <span class="hljs-keyword">alias</span> <span class="hljs-string">&#x27;msr&#x27;</span>: <span class="hljs-keyword">Function</span> <span class="hljs-keyword">not</span> implemented<br>Failed <span class="hljs-keyword">to</span> look up module <span class="hljs-keyword">alias</span> <span class="hljs-string">&#x27;vboxdrv&#x27;</span>: <span class="hljs-keyword">Function</span> <span class="hljs-keyword">not</span> implemented<br>Failed <span class="hljs-keyword">to</span> look up module <span class="hljs-keyword">alias</span> <span class="hljs-string">&#x27;vboxnetadp&#x27;</span>: <span class="hljs-keyword">Function</span> <span class="hljs-keyword">not</span> implemented<br>Failed <span class="hljs-keyword">to</span> look up module <span class="hljs-keyword">alias</span> <span class="hljs-string">&#x27;vboxnetflt&#x27;</span>: <span class="hljs-keyword">Function</span> <span class="hljs-keyword">not</span> implemented<br>Failed <span class="hljs-keyword">to</span> look up module <span class="hljs-keyword">alias</span> <span class="hljs-string">&#x27;uinput&#x27;</span>: <span class="hljs-keyword">Function</span> <span class="hljs-keyword">not</span> implemented<br>Failed <span class="hljs-keyword">to</span> look up module <span class="hljs-keyword">alias</span> <span class="hljs-string">&#x27;vboxguest&#x27;</span>: <span class="hljs-keyword">Function</span> <span class="hljs-keyword">not</span> implemented<br>Failed <span class="hljs-keyword">to</span> look up module <span class="hljs-keyword">alias</span> <span class="hljs-string">&#x27;vboxsf&#x27;</span>: <span class="hljs-keyword">Function</span> <span class="hljs-keyword">not</span> implemented<br>Failed <span class="hljs-keyword">to</span> look up module <span class="hljs-keyword">alias</span> <span class="hljs-string">&#x27;vboxvideo&#x27;</span>: <span class="hljs-keyword">Function</span> <span class="hljs-keyword">not</span> implemented<br><br>systemcd-modules-<span class="hljs-keyword">load</span>.service: Failed <span class="hljs-keyword">with</span> result <span class="hljs-string">&#x27;exit-code&#x27;</span>.<br>Failed <span class="hljs-keyword">to</span> <span class="hljs-keyword">start</span> <span class="hljs-keyword">Load</span> Kernel Modules.<br></code></pre></div></td></tr></table></figure>

<p>try to fix, but failed :(</p>
<p>A similar post: <a target="_blank" rel="noopener" href="https://www.linuxquestions.org/questions/linux-newbie-8/error-%3D-%27failed-failed-to-start-load-kernel-modules%27-4175654997/">Error = ‘FAILED. Failed to start Load Kernel Modules’</a></p>
<hr>
<p><code>2021/03/06 update</code></p>
<h4 id="Enable-BBR-in-Ubuntu"><a href="#Enable-BBR-in-Ubuntu" class="headerlink" title="Enable BBR in Ubuntu"></a>Enable BBR in Ubuntu</h4><ol>
<li><p>check if BBR in use</p>
<figure class="highlight pgsql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs pgsql"># output <span class="hljs-keyword">nothing</span> shows that BBR <span class="hljs-keyword">is</span> <span class="hljs-keyword">off</span> <br>lsmod | grep bbr<br></code></pre></div></td></tr></table></figure>
<p>or</p>
<figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-comment"># By default, Linux uses the Reno and CUBIC congestion control algorithm. To check available congestion control algorithms, run the following command: </span><br><span class="hljs-attribute">sysctl</span> net.ipv<span class="hljs-number">4</span>.tcp_available_congestion_control<br><br><span class="hljs-comment"># Output: </span><br><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_available_congestion_control = cubic reno<br><br><span class="hljs-comment"># To check the current congestion control algorithm in use, run:</span><br><span class="hljs-attribute">sysctl</span> net.ipv<span class="hljs-number">4</span>.tcp_congestion_control<br><br><span class="hljs-comment"># Output: </span><br><span class="hljs-attribute">net</span>.ipv<span class="hljs-number">4</span>.tcp_congestion_control = cubic<br></code></pre></div></td></tr></table></figure>
</li>
<li><p>enable BBR</p>
<figure class="highlight routeros"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs routeros">vim /etc/sysctl.d/local-bbr.conf<br><br><span class="hljs-comment"># add following two lines</span><br>net.core.<span class="hljs-attribute">default_qdisc</span>=fq<br>net.ipv4.<span class="hljs-attribute">tcp_congestion_control</span>=bbr<br><br><span class="hljs-comment"># apply change by </span><br>deb-systemd-invoke restart procps.service<br></code></pre></div></td></tr></table></figure>

</li>
</ol>
<p>Ref:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.linuxbabe.com/ubuntu/enable-google-tcp-bbr-ubuntu">Easily Boost Ubuntu Network Performance by Enabling TCP BBR</a></li>
<li>sysctl mannual: <code>/etc/sysctl.d/README.sysctl</code></li>
</ul>
<hr>
<p><code>2021/03/14 update</code></p>
<h4 id="Install-nvidia-driver"><a href="#Install-nvidia-driver" class="headerlink" title="Install nvidia driver"></a>Install nvidia driver</h4><figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-comment"># install packages</span><br><span class="hljs-attribute">sudo</span> pacman -S nvidia-utils lib<span class="hljs-number">32</span>-nvidia-utils linux<span class="hljs-number">59</span>-nvidia<br><br><span class="hljs-comment"># block nouveau</span><br><span class="hljs-attribute">vim</span> /etc/modprobe.d/blacklist-nvidia-nouveau.conf<br><span class="hljs-comment"># add following lines</span><br><span class="hljs-attribute">blacklist</span> nouveau<br><span class="hljs-attribute"><span class="hljs-nomarkup">options</span></span> nouveau modeset=<span class="hljs-number">0</span><br><br><span class="hljs-comment"># reboot </span><br></code></pre></div></td></tr></table></figure>

<p>Ref:<br><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/NVIDIA">NVIDIA - ArchWiki</a><br><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Nouveau">Nouveau - ArchWiki</a><br><a target="_blank" rel="noopener" href="https://linuxconfig.org/how-to-disable-blacklist-nouveau-nvidia-driver-on-ubuntu-20-04-focal-fossa-linux">How to disable/blacklist Nouveau nvidia driver on Ubuntu 20.04 Focal Fossa Linux</a></p>
<hr>
<p><code>2021/03/14 update</code></p>
<h4 id="Downgrade-a-package"><a href="#Downgrade-a-package" class="headerlink" title="Downgrade a package"></a>Downgrade a package</h4><ul>
<li><p>Search the old package in <a target="_blank" rel="noopener" href="https://archive.org/details/archlinuxarchive">“Arch Linux Historical Archive” on archive.org</a></p>
</li>
<li><p>For example, install qbittorrent-4.1.9<br><code>sudo pacman -U https://archive.org/download/archlinux_pkg_qbittorrent/qbittorrent-4.1.9-1-x86_64.pkg.tar.xz</code></p>
</li>
<li><p>install telegram-desktop<br><code>sudo pacman -U https://archive.org/download/archlinux_pkg_telegram-desktop/telegram-desktop-2.7.4-2-x86_64.pkg.tar.zst</code></p>
</li>
</ul>
<p>Ref: <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Arch_Linux_Archive#Historical_Archive">ArchWiki - Arch Linux Archive: How to downgrade one package</a></p>
<hr>
<p><code>2021/03/22 update</code></p>
<h4 id="Creat-Disk-Partition-with-parted"><a href="#Creat-Disk-Partition-with-parted" class="headerlink" title="Creat Disk Partition with parted"></a>Creat Disk Partition with parted</h4><figure class="highlight awk"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs awk"><span class="hljs-comment"># 1. creat partition</span><br>parted <span class="hljs-regexp">/dev/</span>sdb<br>(parted) mklabel gpt<br><br>(parted) mkpart<br>File system type? ext4<br>Start? <span class="hljs-number">1</span><br>End? <span class="hljs-number">5000</span><br><span class="hljs-comment"># the Unit of End is &quot;MB&quot;</span><br><br><span class="hljs-comment"># 2. build filesystem</span><br>mkfs.ext4 <span class="hljs-regexp">/dev/</span>sdb1<br><br><span class="hljs-comment"># 3. mount it</span><br></code></pre></div></td></tr></table></figure>

<p>Ref:<br><a target="_blank" rel="noopener" href="https://www.linuxtechi.com/create-disk-partitions-parted-command-linux/">How to Create Disk Partitions with Parted Command in Linux</a><br><a target="_blank" rel="noopener" href="https://www.techrepublic.com/article/how-to-properly-automount-a-drive-in-ubuntu-linux/">How to properly automount a drive in Ubuntu Linux</a></p>
<hr>
<p><code>2021/04/09 update</code></p>
<h4 id="Update-Pacman-Mirrorlist"><a href="#Update-Pacman-Mirrorlist" class="headerlink" title="Update Pacman Mirrorlist"></a>Update Pacman Mirrorlist</h4><figure class="highlight applescript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs applescript">pacman-mirrors -<span class="hljs-built_in">id</span><br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>After creating/editing /etc/pacman.d/mirrorlist, issue the following command:<br><code>pacman -Syyu</code></p>
</blockquote>
<hr>
<p><code>2021/05/01 update</code></p>
<h4 id="Automated-Backup"><a href="#Automated-Backup" class="headerlink" title="Automated Backup"></a>Automated Backup</h4><p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Rsync#Automated_backup">ArchWiki - Rsync: Automated backup</a></p>
<hr>
<p><code>2021/05/05 update</code></p>
<h4 id="In-prograss-Automated-Empty-Clipboard-Content"><a href="#In-prograss-Automated-Empty-Clipboard-Content" class="headerlink" title="[In-prograss] Automated Empty Clipboard Content"></a>[In-prograss] Automated Empty Clipboard Content</h4><p>Use ‘KDE klipper actions’ with ‘qdbus org.kde.klipper /klipper clearClipboardContents’ command.<br>But not perfect, need another method.</p>
<p>klipper has these commands:</p>
<figure class="highlight stylus"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs stylus">org<span class="hljs-selector-class">.kde</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.clearClipboardContents</span><br>org<span class="hljs-selector-class">.kde</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.clearClipboardHistory</span><br>org<span class="hljs-selector-class">.kde</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.getClipboardContents</span><br>org<span class="hljs-selector-class">.kde</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.getClipboardHistoryItem</span><br>org<span class="hljs-selector-class">.kde</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.getClipboardHistoryMenu</span><br>org<span class="hljs-selector-class">.kde</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.saveClipboardHistory</span><br>org<span class="hljs-selector-class">.kde</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.setClipboardContents</span><br>org<span class="hljs-selector-class">.kde</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.showKlipperManuallyInvokeActionMenu</span><br>org<span class="hljs-selector-class">.kde</span><span class="hljs-selector-class">.klipper</span><span class="hljs-selector-class">.klipper</span>.showKlipperPopupMenu<br></code></pre></div></td></tr></table></figure>
<p><code>clearClipboardContents</code> sometimes don’t work, ‘clearClipboardHistory’ work normally</p>
<p>Ref:<br><a target="_blank" rel="noopener" href="https://userbase.kde.org/Klipper">KDE UserBase Wiki - Klipper</a><br><a target="_blank" rel="noopener" href="https://forum.kde.org/viewtopic.php?f=289&t=135553">Command line access to Plasma clipboard</a><br><a target="_blank" rel="noopener" href="https://forums.opensuse.org/showthread.php/488491-Clear-clipboard-in-Konsole">Clear clipboard in Konsole</a></p>
<hr>
<p><code>2021/08/18 update</code></p>
<h4 id="Firefox-smoothScroll-maybe-useful"><a href="#Firefox-smoothScroll-maybe-useful" class="headerlink" title="Firefox smoothScroll (maybe useful?)"></a>Firefox smoothScroll (maybe useful?)</h4><p>input <code>about:config</code> in address bar, edit <code>general.smoothScroll.mouseWheel.migrationPercent</code> to <code>0</code></p>
<p>Ref: I can’t remember……</p>
<hr>
<p><code>2021/10/01 update</code></p>
<h4 id="Do-Not-Disturb-a-server-which-running-normally"><a href="#Do-Not-Disturb-a-server-which-running-normally" class="headerlink" title="Do Not Disturb a server which running normally("></a><del>Do Not Disturb a server which running normally</del>(</h4><p>Update and reboot 2 servers, then can’t SSH to them, 100 percentage lost…</p>
<h5 id="Server-1"><a href="#Server-1" class="headerlink" title="Server 1"></a>Server 1</h5><p>VNC to it, a mounted driver bugged.</p>
<p><code>ls</code> get <code>ls: reading directory XXX Input/output error</code><br><code>dmesg</code> get <code>Buffer I/O error on dev sda1, logical block 0, lost sync page write</code></p>
<p>Reboot the server, <code>mount</code> get <code>mount: XXX : can&#39;t read superblock on /dev/sda.</code></p>
<p>First comment this bugged driver in <code>/etc/fstab</code>, I just want to boot and SSH normally.</p>
<p>Open a support ticket, get a reply <code>power/off and power on (not a reboot) your server and try again</code><br>It working, fine ~</p>
<h5 id="Server-2"><a href="#Server-2" class="headerlink" title="Server 2"></a>Server 2</h5><p>VNC to it, found server’s network is down.</p>
<ul>
<li>When boot, it said <code>Failed to start Raise network interfaces</code></li>
<li><code>journalctl -u networking</code> get <code>/etc/network/if-pre-up.d/iptables: line 2: /sbin/iptables-restore: No such file or directory</code></li>
</ul>
<p><code>touch /sbin/iptables-restore &amp;&amp; chmod 744 /sbin/iptables-restore</code><br><code>systemctl start networking</code><br>Ref: <a target="_blank" rel="noopener" href="https://www.linuxquestions.org/questions/linux-networking-3/iptables-if-pre-up-blocking-my-network-interfaces-debian-4175545524/">Iptables if-pre-up blocking my network interfaces - Debian</a></p>
<p>Network interfaces is up, but IP changed…</p>
<p>Open a support ticket, want to change the IP back.</p>
<hr>
<p>In one word, <del>Do Not Disturb a server which running normally</del>(</p>
<hr>
<p><code>2022/03/01 update</code></p>
<h4 id="Batch-rename"><a href="#Batch-rename" class="headerlink" title="Batch rename"></a>Batch rename</h4><p>Ref: <a target="_blank" rel="noopener" href="https://www.makeuseof.com/batch-rename-files-in-linux/">The 7 Best Ways to Batch Rename Files in Linux</a></p>
<figure class="highlight vim"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs vim"># replace <span class="hljs-string">&quot;file&quot;</span> with <span class="hljs-string">&quot;photo&quot;</span><br><span class="hljs-built_in">rename</span> <span class="hljs-keyword">file</span> photo *.png<br><br># <span class="hljs-built_in">rename</span> multi <span class="hljs-keyword">files</span> within Vim<br>qmv -<span class="hljs-keyword">e</span> <span class="hljs-keyword">vim</span><br></code></pre></div></td></tr></table></figure>

<hr>
<p><code>2022/08/10 update</code></p>
<h4 id="“Failed-to-mount-boot-efi”-after-update"><a href="#“Failed-to-mount-boot-efi”-after-update" class="headerlink" title="“Failed to mount /boot/efi” after update"></a>“Failed to mount /boot/efi” after update</h4><p>Ref:<br><a target="_blank" rel="noopener" href="https://archived.forum.manjaro.org/t/howto-restore-an-unbootable-system-after-an-interrupted-kernel-update/33085">HowTo - Restore an unbootable system after an interrupted kernel update</a><br><a target="_blank" rel="noopener" href="https://forum.manjaro.org/t/mkinitcpio-tries-to-work-on-uninstalled-kernels/54399/3">Mkinitcpio tries to work on uninstalled kernels</a></p>
<figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-comment"># chroot</span><br><span class="hljs-attribute">manjaro</span>-chroot -a<br><br><span class="hljs-comment"># The first updates the system. </span><br><span class="hljs-comment"># Second command rebuilds initramfs for all installed kernels. </span><br><span class="hljs-comment"># Third command updates grub, so that entries for all the kernels are up to date.</span><br><span class="hljs-attribute">pacman</span> -Syu<br><span class="hljs-attribute">mkinitcpio</span> -P<br><span class="hljs-attribute">update</span>-grub<br><br><span class="hljs-comment"># remove a not valid kernel module </span><br><span class="hljs-comment"># Check what you got under /use/lib/modules. If no linux57-58 folders there, then you can remove related files in /boot and /etc/mkinitcpio.d manually. Otherwise, you need to uninstall linux57-58 with pacman.</span><br></code></pre></div></td></tr></table></figure>

<hr>
<p><code>2022/09/18 update</code></p>
<h4 id="Wired-Connetion-Disconnects-journalctl-display-“carrier-changed”"><a href="#Wired-Connetion-Disconnects-journalctl-display-“carrier-changed”" class="headerlink" title="Wired Connetion Disconnects, journalctl display “carrier-changed”"></a>Wired Connetion Disconnects, journalctl display “carrier-changed”</h4><p>Ref:<br><a target="_blank" rel="noopener" href="https://forum.manjaro.org/t/network-manager-stops-working-every-30-minutes-or-so/12892">Network Manager Stops Working Every 30 Minutes or So</a><br><a target="_blank" rel="noopener" href="https://forum.manjaro.org/t/ethernet-connection-randomly-disconnects-reason-carrier-changed/116307">Ethernet connection randomly disconnects, “reason: ‘carrier-changed”</a></p>
<figure class="highlight vala"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs vala">journalctl -b --no-hostname --no-pager -u NetworkManager<br><br><span class="hljs-meta"># Check journalctl</span><br><span class="hljs-meta"># NetworkManager: &lt;info&gt;   device (enp): state change: unavailable -&gt; disconnected (reason &#x27;carrier-changed&#x27;, sys-iface-state: &#x27;managed&#x27;)</span><br><br><span class="hljs-meta"># As this post &quot;Ethernet connection randomly disconnects, “reason: ‘carrier-changed”&quot;</span><br><span class="hljs-meta"># The reaseon is my wired cable...</span><br><span class="hljs-meta"># And that&#x27;s right, really a hardware problem...</span><br><span class="hljs-meta"># Try another port on switch, restart NetworkManager, and everything OK...</span><br><br>systemctl restart NetworkManager.service<br></code></pre></div></td></tr></table></figure>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/notebook/">notebook</a>
                    
                      <a class="hover-with-bg" href="/tags/Linux/">Linux</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-NC-ND 4.0协议</a> 。转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/03/31/040-change-vim-comment-color/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">040 change vim comment color</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/03/12/038-MPV-configuration/">
                        <span class="hidden-mobile">038 MPV configuration</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'KassadinL/blog_comment');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":200})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
